# pyCertLogo
OpenSSL config-file generator to embed pictures or audio sketches into X.509 digital certificates.
Implements X.509 Public Key Infrastructure (PKI) standards [RFC 3709](https://www.rfc-editor.org/rfc/rfc3709) (“Logotypes in X.509 Certificates”) and [RFC 6170](https://www.rfc-editor.org/rfc/rfc6170) (“Certificate Image”).
This may also be used for *electronic* certificates, pursuant to [Regulation (UE) №910/2014 “**eIDAS**”](https://digital-strategy.ec.europa.eu/en/policies/eidas-regulation) (currently being updated), used for electronic signatures (e-signing), seals (e-sealing), attestations of attribute, ledgers, website authentication and other types of electronic trust services.

Its main purpose is supporting the generation of OpenSSL configuration files allowing the embedding of logotypes (either images and audio, cfr. below) into X.509 public-key or attribute certificates, originally conforming to ITU-T X.509 / [RFC 5280](https://www.rfc-editor.org/rfc/rfc5280) standard.

Certificate logos may augment final applications and improve the overall *digital trust*, as they provide trusted visual representations of people, organizations, website and/or IT systems which digital certificates are bound to. The digital signature of a CA over such digital certificate also protects the embedded logos/logotypes, thus ensuring their integrity and authenticity together with the rest of the certified data (e.g. a public key or attribute).
A non-exhaustive list of applications for certiticate logos/logotypes/images include:
 * Compositing, on an electronically signed PDF document, of the scanned picture of the signatory's (natural person's) **handwritten signature**, derived from the e-signature certificate itself. When the e-signed document is printed on paper or viewed on screen, the e-signature's graphics provies a convincing visual representation of the signatory's handwritten signature. Besides, the signature is not pasted from a potentially untrusted image under the control of typesetting writer, but rather automatically derived from the electronic certificate, as part of the e-signing process under the control of the signatory. Cfr. ETSI [EN 319-142](https://www.etsi.org/deliver/etsi_en/319100_319199/31914201/01.01.01_60/en_31914201v010101p.pdf) “PAdES” standards' family.
 * Compositing, on an electronically sealed PDF document, of the **organization**/**federation**/**product**/etc. **logo**s/logotypes that improve the document's graphic authenticity. Cfr. considerations from the previous bullet point.
 * Extract, from the identification/authentication certificate in a ID smartcard, or associated with any electronic identification (eID) means, the ID owner's ICAO-compliant photo. The authority e-sealing the above certificate also authenticated the photo, enabling trusted **identity proofing**/**KYC** by visual or automated comparison with either the photo printed on the ID or visual inspection by a (e.g. customs) officer. This process augments and builds from eID [Passive Authentication](https://www.bsi.bund.de/EN/Themen/Oeffentliche-Verwaltung/Elektronische-Identitaeten/Elektronische-Ausweisdokumente/Sicherheitsmechanismen/Passive-Authentication/passive-authentication_node.html) method (cfr. BSI [TR-03110](https://www.bsi.bund.de/EN/Themen/Unternehmen-und-Organisationen/Standards-und-Zertifizierung/Technische-Richtlinien/TR-nach-Thema-sortiert/tr03110/TR-03110_node.html) standard).
 * Display the logotype of a trusted website's organization directly from its TLS / website authentication certificate (WAC), as soon as the website is visited. The web browser performing an independent, out-of-band validation of the WAC (e.g. the [*eIDAS QWAC Validator*](https://addons.mozilla.org/en-US/firefox/addon/eidas-qwac-validator/) plug-in for *Firefox*) may help internet users with **detection of spoofed**/**typosquatted**/**defaced websites**, as the web-browser would show an off-page outcome of the above WAC validation. In this case the logo extracted from the validated WAC provides improved user experience (UX) on the association of the visited page with its legitimate owner (instead of relying on `commonName` or lenghtier-to-read distinguished names in the WAC).
 * Applications processing non-PDF e-sealed documents (e.g. XML, JSON/JWS **messages**, **blockchain** transactions, OAuth/SAML **assertions** or **tokens**), databases (e.g. e-ledgers) or attestation of attributes may extract pictures from the e-sealing certificates. That would augment GUI-driven UX for such documents or processes. Some examples:
     * an otherwise-anonymous XML document icon may be better identified in case the operating system composites badges over it representing logos from the certificate(s) associated to e-seals/signatures present in, or associated with the document;
     * visual processing of a transaction (e.g. e-payment) may include the circuit's or the service provider's logoype displayed on the web page or the app's UI, as extracted from the authoritative source (e-certificate).

This Python script includes a service class to manipulate Object Identifiers (OIDs) and classes to prepare logos embedding within X.509 certificates. The script's deliverable is sections of a OpenSSL configuration file to generate digital certificates with the embedded logo(s). OpenSSL (or compatible appliations, e.g. [*`xca`*](https://hohnstaedt.de/xca/)) parses a certificate profile internally or externally (e.g. via `.include` statements) referncing such sections from the X509v3 extensions' section.

Other relevant technical standards where certificate logos may improve the overall UX include those on digital signatures (including e-signatures/seals) of the following file formats:
 * **XML**: either W3C's XML Digital Signature ([XML-DSIG](https://www.w3.org/TR/xmldsig-core2/)), and “XAdES”, ETSI [EN 319-132](https://www.etsi.org/deliver/etsi_en/319100_319199/31913201/01.02.01_60/en_31913201v010201p.pdf) family;
 * **JSON**: either JSON Web Signature (JWS), [RFC 7515](https://rfc-editor.org/rfc/rfc7515), and “JAdES”, ETSI [TS 119-182](https://www.etsi.org/deliver/etsi_ts/119100_119199/11918201/01.01.01_60/ts_11918201v010101p.pdf) family.

Currently supported file formats for certificate logos are GIF, JPEG, PNG, SVG(Z), PDF, as well as MP3 (meant to contain logotypes' audio description), although the script does currently only inspect SVG(Z) logotypes to perform some mild validations: it is up to the user to ensure the files comply with the technical format constrains from the first two aforementioned RFCs.
